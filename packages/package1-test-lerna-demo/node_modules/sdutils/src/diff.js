/**
 * @file 比较两个值是否全等
 * @author picheng@sensorsdata.cn
 */

/**
 * @param {*} value1 需要比较的值
 * @param {*} value2 需要比较的值
 * @return {boolean}
 */
export default function diff(value1, value2) {
  if (value1 === value2) {
    return true;
  }
  // Array diff
  if (value1 instanceof Array && value2 instanceof Array) {
    if (value1.length !== value2.length) {
      return false;
    }
    for (let i = 0, len = value1.length; i < len; i++) {
      if (!diff(value1[i], value2[i])) {
        return false;
      }
    }
    return true;
  }
  // Object diff
  if (typeof value1 === 'object' && typeof value2 === 'object') {
    const keys1 = Object.keys(value1 || {});
    const keys2 = Object.keys(value2 || {});
    if (keys1.length !== keys2.length) {
      return false;
    }
    for (let i = 0, len = keys1.length; i < len; i++) {
      let key = keys1[i];
      if (!diff(value1[key], value2[key])) {
        return false;
      }
    }
    return true;
  }
  return false;
}
